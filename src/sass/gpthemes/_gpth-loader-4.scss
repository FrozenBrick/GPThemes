// Variables
$loader-prefix: 'theme-loader';
$spinner-size: 5rem;
$spinner-border: 3px;
$title-size: 4rem;
$fade-duration: 200ms;

// Base loader
#theme-loader {
    position: fixed;
    inset: 0;
    z-index: 9999;
    display: grid;
    place-items: center;
    height: 100dvh;
    background-color: var(--c-bg, rgba(255, 255, 255, 0.95));
    transition: opacity $fade-duration ease-out;

    .#{$loader-prefix} {
        &__content {
            display: grid;
            place-items: center;
            gap: 1rem;
            contain: layout style;
        }

        &__title {
            font-size: $title-size;
            font-weight: 300;
            text-align: center;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;

            span {
                display: inline-block;
                background: linear-gradient(135deg,
                        var(--c-accent, #007aff),
                        var(--c-accent-light, rgba(0, 122, 255, 0.2)));
                background-size: 300% 100%;
                -webkit-background-clip: text;
                background-clip: text;
                color: transparent;
                animation: gradientFlow 4s linear infinite;
            }
        }

        &__spinner {
            width: $spinner-size;
            height: $spinner-size;
            border: $spinner-border solid var(--c-border, rgba(0, 0, 0, 0.1));
            border-top-color: var(--c-accent, #007aff);
            border-radius: 50%;
            will-change: transform;
            contain: layout style;
        }
    }
}

// Animations
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes gradientFlow {
    0% {
        background-position: 0% 50%;
    }

    100% {
        background-position: 300% 50%;
    }
}

// Reduced motion
@media (prefers-reduced-motion: reduce) {
    .#{$loader-prefix} {
        &__spinner {
            animation-duration: 1.5s !important;
        }

        &__title span {
            animation: none;
            background-position: 0;
        }
    }
}