// Custom theme variables (optional)
// :root {
//     --loader-bg: #ffffff;
//     --loader-bg-transparent: rgba(255, 255, 255, 0.8);
//     --loader-accent-color: #007aff;
//     --loader-border-color: rgba(0, 122, 255, 0.14);
//     --loader-gradient-start: ;
//     --loader-gradient-end: rgba(0, 122, 255, 0.2);
// }

// Import the loader styles
// @import 'theme-loader';

// Variables
$loader: '.gpth-theme-loader' !default;
$spinner-size: 5rem !default;
$spinner-border: 3px !default;
$title-size: 4rem !default;
$gap: 2rem !default;

// Mixins
@mixin text-gradient($direction: 90deg, $color1, $color2) {
    background: linear-gradient($direction, $color1, $color2, $color1, $color2);
    background-size: 300% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: gradientFlow 4s linear infinite;
}

@mixin spinner($size, $border-width) {
    width: $size;
    height: $size;
    border: $border-width solid var(--loader-border-color, hsla(var(--accent-hsl) / 0.14));
    border-top-color: var(--loader-accent-color, var(--c-accent));
    border-radius: 50%;
    animation: spin 1s linear infinite;
}



// Main Styles
#gpth-theme-loader {
    position: fixed;
    inset: 0;
    // width: 100%;
    // height: 100%;
    z-index: 9999;
    display: grid;
    place-items: center;
    background-color: var(--c-bg-sidebar);
    animation: animFadeIn 0.2s ease-out;
}

#{$loader} {
    &__content {
        display: grid;
        place-items: center;
        gap: $gap;
        // background-color: red !important;

        // Prevent layout shift during animation
        contain: layout style;
    }

    &__title {
        font-size: $title-size;
        font-weight: 300;
        // line-height: 1.2;
        text-align: center;

        // Optimize text rendering
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;

        span {
            @include text-gradient(135deg,
                var(--loader-gradient-start, var(--c-accent)),
                var(--loader-gradient-end, hsla(var(--accent-hsl) / 0.2)));

            // Prevent layout shift during animation
            display: inline-block;
        }
    }

    &__spinner {
        @include spinner($spinner-size, $spinner-border);

        // Optimize performance
        will-change: transform;
        contain: layout style;

        // Force GPU acceleration
        transform: translateZ(0);
    }

    // Responsive adjustments
    /*  @media (max-width: 768px) {
        &__title {
            font-size: $title-size * 0.75;
        }

        &__spinner {
            width: $spinner-size * 0.75;
            height: $spinner-size * 0.75;
        }
    } */

    // Reduced motion preference
    @media (prefers-reduced-motion: reduce) {
        &__spinner {
            animation-duration: 1.5s;
        }

        &__title span {
            animation: none;
            background-position: 0;
        }
    }
}

// Optional: Dark mode adjustments
// @media (prefers-color-scheme: dark) {
//     #gpth-theme-loader {
//         --loader-border-color: hsla(var(--accent-hsl) / 0.2);
//         --loader-bg-transparent: rgba(var(--c-bg-sidebar-rgb), 0.9);
//     }
// }