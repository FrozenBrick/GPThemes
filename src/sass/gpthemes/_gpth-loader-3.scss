// Custom theme variables (optional)
// :root {
//     --loader-bg: #ffffff;
//     --loader-bg-transparent: rgba(255, 255, 255, 0.8);
//     --loader-accent-color: #007aff;
//     --loader-border-color: rgba(0, 122, 255, 0.14);
//     --loader-gradient-start: ;
//     --loader-gradient-end: rgba(0, 122, 255, 0.2);
// }

// Import the loader styles
// @import 'theme-loader';

// Variables
$loader: '.gpth-theme-loader' !default;
$spinner-size: 5rem !default;
$spinner-border: 3px !default;
$title-size: 4rem !default;
$gap: 1rem !default;

// ANIMATIONS
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

@keyframes gradient-shimmer {
    0% {
        background-position: 200% 0;
    }

    100% {
        background-position: -200% 0;
    }
}

@keyframes gradientFlow {
    0% {
        background-position: 0% 50%;
    }

    100% {
        background-position: 300% 50%;
    }
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}



// Mixins
@mixin text-gradient($direction: 90deg, $color1, $color2) {
    background: linear-gradient($direction, $color1, $color2, $color1, $color2);
    background-size: 300% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
    animation: gradientFlow 4s linear infinite !important;
}

@mixin spinner($size, $border-width) {
    width: $size;
    height: $size;
    border: $border-width solid hsla(var(--accent-hsl) / 0.14);
    border-top-color: var(--c-accent);
    border-radius: 50%;
    animation: spin 1s linear infinite !important;
}


// Main Styles
#gpth-theme-loader {
    position: fixed;
    inset: 0;
    // width: 100%;
    // height: 100%;
    z-index: 9999;
    display: grid;
    place-items: center;
    width: 100vw;
    height: 100dvh;
    background-color: var(--c-bg-sidebar);
    animation: fadeIn 0.2s ease-out;
    // @extend %animFadeIn;
}

#{$loader} {
    &__content {
        display: grid;
        place-items: center;
        justify-content: center;
        align-content: center;
        gap: $gap;
        width: 100%;
        height: 100%;
        // Prevent layout shift during animation
        contain: layout style;
    }

    &__title {
        font-size: $title-size;
        font-weight: 300;
        text-align: center;

        // Optimize text rendering
        text-rendering: optimizeLegibility;
        -webkit-font-smoothing: antialiased;

        span {
            @include text-gradient(135deg, var(--c-accent), hsla(var(--accent-hsl) / 0.2));

            // Prevent layout shift during animation
            display: inline-block;
        }
    }

    &__spinner {
        // @include spinner($spinner-size, $spinner-border);

        width: $spinner-size;
        height: $spinner-size;
        border: $spinner-border solid hsla(var(--accent-hsl) / 0.14);
        border-top-color: var(--c-accent);
        border-radius: 50%;
        animation: spin 1s linear infinite !important;

        // Optimize performance
        will-change: transform;
        contain: layout style;

        backface-visibility: hidden;
        perspective: 1000;
        transform: translate3d(0, 0, 0);

        // Force GPU acceleration
        // transform: translateZ(0);
    }

    // Responsive adjustments
    /*  @media (max-width: 768px) {
        &__title {
            font-size: $title-size * 0.75;
        }

        &__spinner {
            width: $spinner-size * 0.75;
            height: $spinner-size * 0.75;
        }
    } */

    // Reduced motion preference
    @media (prefers-reduced-motion: reduce) {
        &__spinner {
            animation-duration: 1.5s;
        }

        &__title span {
            animation: none;
            background-position: 0;
        }
    }
}